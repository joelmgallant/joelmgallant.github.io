"use strict";var demo=function(a,b){function c(){var b=Trianglify({width:a.innerWidth,height:a.innerHeight,cell_size:90,variance:1,stroke_width:1,x_colors:["#000000","#4CAFE8","#FFFFFF"],y_colors:["#000000","#4CAFE8","#FFFFFF"]}).svg();d(b),e()}function d(a){$(k.pattern).append(a),m.paths=[].slice.call(a.childNodes),m.points=[],m.paths.forEach(function(a){$(a).attr("class",l.polygon);var b=a.getBoundingClientRect(),c={x:b.left+b.width/2,y:b.top+b.height/2};m.points.push(c)}),$(k.pattern).removeClass(l.patternHidden)}function e(){var a=$(k.card);$.each(a,function(a,b){var c=new Card(b,a);n[b]={card:c};var d=$(a).find(k.cardImage),e=$(a).find(k.cardClose);$(d).on("click",f.bind(this,!0,b)),$(e).on("click",f.bind(this,!1,b))})}function f(a,b,c){var d=n[b].card;if(!d.isOpen||!a){var e=new TimelineLite({paused:!0}),f=g(b);if(d.isOpen){var j=d.closeCard(),k=.8*j.duration();e.add(j),e.add(f,k)}else h(c.target),e.add(f),e.add(d.openCard(i),0);e.play()}}function g(a){var b=new TimelineLite,c=n[a].card;for(var d in n){var e=n[d].card;e.id===a||c.isOpen||b.add(e.hideCard(),0),e.id!==a&&c.isOpen&&b.add(e.showCard(),0)}return b}function h(a){var b=$(a).attr("xlink:href");$(k.pattern).css("background-image","url("+b+")")}function i(a){var b=a.width/2,c={x:a.x,y:a.y};m.points.forEach(function(a,d){j(a,b,c)?$(m.paths[d]).attr("class",l.polygon+" "+l.polygonHidden):$(m.paths[d]).attr("class",l.polygon)})}function j(a,b,c){var d=a.x,e=a.y,f=c.x,g=c.y,h=b*b,i=Math.pow(d-f,2)+Math.pow(e-g,2)<=h;return i}var k={pattern:".pattern",card:".card",cardImage:".card__image",cardClose:".card__btn-close"},l={patternHidden:"pattern--hidden",polygon:"polygon",polygonHidden:"polygon--hidden"},m={paths:null,points:null},n={};return{init:c}}(window);window.onload=demo.init;